{"version":3,"file":"list.js","sourceRoot":"","sources":["list.ts"],"names":[],"mappings":"AAAA;;;;GAIG;;AAEH,OAAO,8BAA8B,CAAC;AAEtC,OAAO,EAAC,IAAI,EAAE,UAAU,EAAiC,MAAM,KAAK,CAAC;AACrE,OAAO,EAAC,QAAQ,EAAE,KAAK,EAAE,qBAAqB,EAAC,MAAM,mBAAmB,CAAC;AACzE,OAAO,EAAY,QAAQ,EAAC,MAAM,6BAA6B,CAAC;AAChE,OAAO,EAAC,SAAS,EAAC,MAAM,8BAA8B,CAAC;AAEvD,OAAO,EAAC,YAAY,EAAC,MAAM,mCAAmC,CAAC;AAK/D,MAAM,gBAAgB,GAAG;IACvB,SAAS,EAAE,WAAW;IACtB,OAAO,EAAE,SAAS;IAClB,IAAI,EAAE,MAAM;IACZ,GAAG,EAAE,KAAK;CACX,CAAC;AAEF,qBAAqB;AACrB,MAAM,OAAO,IAAK,SAAQ,UAAU;IAApC;;QAiBE,AADA,uDAAuD;QACvD,SAAI,GAAa,MAAM,CAAC;QAEE,WAAM,GAAG,EAAE,CAAC;QAEZ,iBAAY,GAAW,CAAC,CAAC;QAEnD,UAAK,GAAe,EAAE,CAAC;QACvB,mBAAc,GAAkB,IAAI,CAAC;QAIX,oBAAe,GAAG,cAAc,CAAC;IAyI7D,CAAC;IApIU,YAAY,CAAC,iBAAiC;QACrD,KAAK,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC;QAEtC,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,mBAAmB;IACV,MAAM;QACb,OAAO,IAAI,CAAA;4BACa,QAAQ,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;wBACrC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC;eAClC,SAAS,CAAC,IAAI,CAAC,MAAM,IAAI,SAAS,CAAC;qBAC7B,IAAI,CAAC,YAAY;iBACrB,IAAI,CAAC,IAAI;oBACN,IAAI,CAAC,YAAY;qBAChB,IAAI,CAAC,aAAa;;;;;KAKlC,CAAC;IACJ,CAAC;IAED,mBAAmB;IACT,gBAAgB;QACxB,OAAO,EAAE,CAAC;IACZ,CAAC;IAED,aAAa,CAAC,KAAoB;QAChC,IAAI,MAAM,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YAAE,OAAO;QAEtE,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;YAC7B,IAAI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE;gBAC/B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;aAC5B;YAED,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;SAC/B;QAED,IAAI,KAAK,CAAC,GAAG,KAAK,gBAAgB,CAAC,SAAS,EAAE;YAC5C,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,IAAI,CAAC,cAAc,EAAE;gBACvB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;aAC7D;iBAAM;gBACL,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;aAC3C;SACF;QAED,IAAI,KAAK,CAAC,GAAG,KAAK,gBAAgB,CAAC,OAAO,EAAE;YAC1C,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,IAAI,CAAC,cAAc,EAAE;gBACvB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;aAC7D;iBAAM;gBACL,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;aAC1C;SACF;QAED,IAAI,KAAK,CAAC,GAAG,KAAK,gBAAgB,CAAC,IAAI,EAAE;YACvC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;SAC3C;QAED,IAAI,KAAK,CAAC,GAAG,KAAK,gBAAgB,CAAC,GAAG,EAAE;YACtC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;SAC1C;QAED,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SAC5C;IACH,CAAC;IAES,gBAAgB,CAAC,IAAc;QACvC,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAES,kBAAkB,CAAC,IAAc;QACzC,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAES,gBAAgB,CAAC,IAAc;QACvC,OAAO,IAAI,CAAC,QAAQ,EAAE,CAAC;IACzB,CAAC;IAES,YAAY,CAAC,KAAkB,IAAG,CAAC;IAE7C,iBAAiB;QACf,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAC1C,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC;IACjC,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QACzC,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC;IACjC,CAAC;IAED,mBAAmB;QACjB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC7B,CAAC;IAED,aAAa;QACX,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;IACxB,CAAC;IAED,8DAA8D;IACpD,WAAW;QACnB,MAAM,QAAQ,GAAG,IAAI,CAAC,gBAAgB,IAAI,EAAE,CAAC;QAC7C,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACtD,CAAC;IAED,gEAAgE;IACxD,UAAU,CAAC,OAAgB;QACjC,OAAO,OAAO,CAAC,OAAO,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,eAAe,CAAC;IAChE,CAAC;IAEO,YAAY;QAClB,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACvB,CAAC;IAEO,WAAW;QACjB,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAC3C,CAAC;IAEO,WAAW,CAAC,IAAc;QAChC,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC1C,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;IAC3E,CAAC;IAEO,WAAW,CAAC,IAAc;QAChC,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC1C,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACxD,CAAC;;AAnKe,sBAAiB,GACZ,EAAC,IAAI,EAAE,MAAM,EAAE,cAAc,EAAE,IAAI,EAAC,CAAC;AAI1D;IAFC,YAAY,CAAE,wCAAwC;;IACtD,QAAQ,CAAC,EAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,iBAAiB,EAAE,UAAU,EAAE,IAAI,EAAC,CAAC;;uCAC7C;AAK5B;IAHC,YAAY,CAAE,wCAAwC;;IACtD,QAAQ,CACL,EAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,4BAA4B,EAAE,UAAU,EAAE,IAAI,EAAC,CAAC;;kDAChD;AAM9B;IAJC,YAAY,CAAE,wCAAwC;IACvD,+CAA+C;;IAC9C,QAAQ,CAAC,EAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU,EAAE,IAAI,EAAC,CAAC;;kCAE3C;AAEE;IAAzB,QAAQ,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC;;oCAAa;AAEZ;IAAzB,QAAQ,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC;;0CAA0B;AAK/B;IAAnB,KAAK,CAAC,WAAW,CAAC;8BAAY,WAAW;sCAAC;AAEjB;IAAzB,QAAQ,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC;;6CAAkC;AAG3D;IADC,qBAAqB,CAAC,EAAC,OAAO,EAAE,IAAI,EAAC,CAAC;;8CACS","sourcesContent":["/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport '../../elevation/elevation.js';\n\nimport {html, LitElement, PropertyValues, TemplateResult} from 'lit';\nimport {property, query, queryAssignedElements} from 'lit/decorators.js';\nimport {ClassInfo, classMap} from 'lit/directives/class-map.js';\nimport {ifDefined} from 'lit/directives/if-defined.js';\n\nimport {ariaProperty} from '../../decorators/aria-property.js';\nimport {ARIARole} from '../../types/aria.js';\n\nimport {ListItem} from './listitem/list-item.js';\n\nconst NAVIGATABLE_KEYS = {\n  ArrowDown: 'ArrowDown',\n  ArrowUp: 'ArrowUp',\n  Home: 'Home',\n  End: 'End',\n};\n\n/** @soyCompatible */\nexport class List extends LitElement {\n  static override shadowRootOptions:\n      ShadowRootInit = {mode: 'open', delegatesFocus: true};\n\n  @ariaProperty  // tslint:disable-line:no-new-decorators\n  @property({type: String, attribute: 'data-aria-label', noAccessor: true})\n  override ariaLabel!: string;\n\n  @ariaProperty  // tslint:disable-line:no-new-decorators\n  @property(\n      {type: String, attribute: 'data-aria-activedescendant', noAccessor: true})\n  ariaActivedescendant!: string;\n\n  @ariaProperty  // tslint:disable-line:no-new-decorators\n  // tslint:disable-next-line:decorator-placement\n  @property({type: String, attribute: 'data-role', noAccessor: true})\n  // @ts-ignore(b/264292293): Use `override` with TS 4.9+\n  role: ARIARole = 'list';\n\n  @property({type: String}) listId = '';\n\n  @property({type: Number}) listTabIndex: number = 0;\n\n  items: ListItem[] = [];\n  activeListItem: ListItem|null = null;\n\n  @query('.md3-list') listRoot!: HTMLElement;\n\n  @property({type: String}) listItemTagName = 'md-list-item';\n\n  @queryAssignedElements({flatten: true})\n  protected assignedElements!: HTMLElement[]|null;\n\n  override firstUpdated(changedProperties: PropertyValues) {\n    super.firstUpdated(changedProperties);\n\n    this.updateItems();\n  }\n\n  /** @soyTemplate */\n  override render(): TemplateResult {\n    return html`\n      <ul class=\"md3-list ${classMap(this.getRenderClasses())}\"\n          aria-label=\"${ifDefined(this.ariaLabel)}\"\n          id=${ifDefined(this.listId || undefined)}\n          tabindex=${this.listTabIndex}\n          role=${this.role}\n          @action=${this.handleAction}\n          @keydown=${this.handleKeydown}\n          >\n        <span><slot></slot></span>\n        <md-elevation surface></md-elevation>\n      </ul>\n    `;\n  }\n\n  /** @soyTemplate */\n  protected getRenderClasses(): ClassInfo {\n    return {};\n  }\n\n  handleKeydown(event: KeyboardEvent) {\n    if (Object.values(NAVIGATABLE_KEYS).indexOf(event.key) === -1) return;\n\n    for (const item of this.items) {\n      if (this.isListItemActive(item)) {\n        this.activeListItem = item;\n      }\n\n      this.deactivateListItem(item);\n    }\n\n    if (event.key === NAVIGATABLE_KEYS.ArrowDown) {\n      event.preventDefault();\n      if (this.activeListItem) {\n        this.activeListItem = this.getNextItem(this.activeListItem);\n      } else {\n        this.activeListItem = this.getFirstItem();\n      }\n    }\n\n    if (event.key === NAVIGATABLE_KEYS.ArrowUp) {\n      event.preventDefault();\n      if (this.activeListItem) {\n        this.activeListItem = this.getPrevItem(this.activeListItem);\n      } else {\n        this.activeListItem = this.getLastItem();\n      }\n    }\n\n    if (event.key === NAVIGATABLE_KEYS.Home) {\n      event.preventDefault();\n      this.activeListItem = this.getFirstItem();\n    }\n\n    if (event.key === NAVIGATABLE_KEYS.End) {\n      event.preventDefault();\n      this.activeListItem = this.getLastItem();\n    }\n\n    if (this.activeListItem) {\n      this.activateListItem(this.activeListItem);\n    }\n  }\n\n  protected activateListItem(item: ListItem) {\n    item.activate();\n  }\n\n  protected deactivateListItem(item: ListItem) {\n    item.deactivate();\n  }\n\n  protected isListItemActive(item: ListItem): boolean {\n    return item.isActive();\n  }\n\n  protected handleAction(event: CustomEvent) {}\n\n  activateFirstItem() {\n    this.activeListItem = this.getFirstItem();\n    this.activeListItem.activate();\n  }\n\n  activateLastItem() {\n    this.activeListItem = this.getLastItem();\n    this.activeListItem.activate();\n  }\n\n  resetActiveListItem() {\n    this.activeListItem = null;\n  }\n\n  focusListRoot() {\n    this.listRoot.focus();\n  }\n\n  /** Updates `this.items` based on slot elements in the DOM. */\n  protected updateItems() {\n    const elements = this.assignedElements || [];\n    this.items = elements.filter(this.isListItem, this);\n  }\n\n  /** @return Whether the given element is a list item element. */\n  private isListItem(element: Element): element is ListItem {\n    return element.tagName.toLowerCase() === this.listItemTagName;\n  }\n\n  private getFirstItem(): ListItem {\n    return this.items[0];\n  }\n\n  private getLastItem(): ListItem {\n    return this.items[this.items.length - 1];\n  }\n\n  private getPrevItem(item: ListItem): ListItem {\n    const curIndex = this.items.indexOf(item);\n    return this.items[curIndex === 0 ? this.items.length - 1 : curIndex - 1];\n  }\n\n  private getNextItem(item: ListItem): ListItem {\n    const curIndex = this.items.indexOf(item);\n    return this.items[(curIndex + 1) % this.items.length];\n  }\n}\n"]}